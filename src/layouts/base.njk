<!DOCTYPE html>
<html lang="{{ meta.lang or site.lang }}" x-data="themes" data-theme="lofi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{{ site.title }} - {{ meta.title }}</title>
    {% include "meta.njk" %}
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32' fill='none' stroke='currentColor' stroke-width='2.2' stroke-linecap='round' stroke-linejoin='round'%3E%3Ccircle cx='4' cy='16' r='2' fill='currentColor'/%3E%3Cpolygon points='2,16 10,8 10,24' fill='none' stroke='currentColor'/%3E%3Cline x1='10' y1='16' x2='28' y2='16'/%3E%3Cline x1='14' y1='10' x2='11.5' y2='16'/%3E%3Cline x1='14' y1='22' x2='11.5' y2='16'/%3E%3Cline x1='18' y1='12' x2='15.5' y2='16'/%3E%3Cline x1='18' y1='20' x2='15.5' y2='16'/%3E%3Cline x1='22' y1='14' x2='19.5' y2='16'/%3E%3Cline x1='22' y1='18' x2='19.5' y2='16'/%3E%3Cpolyline points='28,16 31,13 29,16 31,19 28,16'/%3E%3C/svg%3E">
    <link rel="stylesheet" href="{{ '/assets/css/index.css' | url }}">
    <link rel="stylesheet" href="{{ '/node_modules/flyonui/flyonui.css' | url }}">
  </head>

  <body>
    <template x-if="$store.landing.showInternal">
      {% include "header.njk" %}
    </template>

    <main id="main">
      {% if hero_picture %}
        <div class="hero-image mb-8">
          {% image "src/assets/images/" + hero_picture + ".png", title, "100vw" %}
        </div>
      {% endif %}
      
      {{ content | safe }}

    </main>

    <template x-if="$store.landing.showInternal">
      {% include "footer.njk" %}
    </template>

    <!-- Theme Controller -->
    <div class="fixed bottom-4 left-4 z-50" x-show="$store.landing.isDev">
      <div class="flex gap-2">
        <!-- Theme Switcher -->
        <div class="dropdown relative inline-flex">
          <button type="button" class="dropdown-toggle bg-base-200/50 backdrop-blur-sm rounded-box py-2 px-4 border border-primary/20 shadow-lg flex items-center gap-2" aria-haspopup="menu" aria-expanded="false">
            <span class="text-xs text-base-content font-medium">Theme</span>
            <span class="icon-[tabler--chevron-down] dropdown-open:rotate-180 size-4"></span>
          </button>
          <ul class="dropdown-menu dropdown-open:opacity-100 hidden min-w-48 bg-base-200/95 backdrop-blur-sm rounded-box border border-primary/20 shadow-lg p-2" role="menu">
            <li>
              <button class="dropdown-item w-full text-left px-4 py-2 rounded-box hover:bg-base-300/50 transition-colors" 
                      :class="{ 'bg-base-300/50': selectedTheme === 'neon' }"
                      @click="setTheme('neon')">
                Neon
              </button>
            </li>
            <li>
              <button class="dropdown-item w-full text-left px-4 py-2 rounded-box hover:bg-base-300/50 transition-colors"
                      :class="{ 'bg-base-300/50': selectedTheme === 'acid' }"
                      @click="setTheme('acid')">
                Acid
              </button>
            </li>
            <li>
              <button class="dropdown-item w-full text-left px-4 py-2 rounded-box hover:bg-base-300/50 transition-colors"
                      :class="{ 'bg-base-300/50': selectedTheme === 'ghibli' }"
                      @click="setTheme('ghibli')">
                Ghibli
              </button>
            </li>
            <li>
              <button class="dropdown-item w-full text-left px-4 py-2 rounded-box hover:bg-base-300/50 transition-colors"
                      :class="{ 'bg-base-300/50': selectedTheme === 'valorant' }"
                      @click="setTheme('valorant')">
                Valorant
              </button>
            </li>
            <li>
              <button class="dropdown-item w-full text-left px-4 py-2 rounded-box hover:bg-base-300/50 transition-colors"
                      :class="{ 'bg-base-300/50': selectedTheme === 'lemonade' }"
                      @click="setTheme('lemonade')">
                Lemonade
              </button>
            </li>
            <li>
              <button class="dropdown-item w-full text-left px-4 py-2 rounded-box hover:bg-base-300/50 transition-colors"
                      :class="{ 'bg-base-300/50': selectedTheme === 'lofi' }"
                      @click="setTheme('lofi')">
                Lofi
              </button>
            </li>
            <li>
              <button class="dropdown-item w-full text-left px-4 py-2 rounded-box hover:bg-base-300/50 transition-colors"
                      :class="{ 'bg-base-300/50': selectedTheme === 'lofi-dark' }"
                      @click="setTheme('lofi-dark')">
                Lofi Dark
              </button>
            </li>
            <li>
              <button class="dropdown-item w-full text-left px-4 py-2 rounded-box hover:bg-base-300/50 transition-colors"
                      :class="{ 'bg-base-300/50': selectedTheme === 'tech' }"
                      @click="setTheme('tech')">
                Tech
              </button>
            </li>
          </ul>
        </div>

        <!-- Coming Soon Toggle (Only on landing page) -->
        <div x-show="window.location.pathname === '/' || window.location.pathname === '/index.html'" class="bg-base-200/50 backdrop-blur-sm rounded-box py-2 px-4 border border-primary/20 shadow-lg">
          <div class="flex items-center gap-2">
            <span class="text-xs text-base-content font-medium">Coming Soon</span>
            <label class="cursor-pointer">
              <input type="checkbox" class="switch switch-primary" :checked="$store.landing.showInternal" @change="$store.landing.toggleView()" />
            </label>
            <span class="text-xs text-base-content font-medium">Full Site</span>
          </div>
        </div>
      </div>
    </div>

    <script type="module" src="{{ '/assets/js/index.js' | url }}"></script>
    <script type="module" src="{{ '/node_modules/flyonui/flyonui.js' | url }}"></script>
  </body>
</html>
