<!DOCTYPE html>
<html lang="{{ meta.lang or site.lang }}" x-data="themes">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{{ site.title }} - {{ meta.title }}</title>
    {% include "meta.njk" %}
    <link rel="stylesheet" href="{{ '/assets/css/index.css' | url }}">
    <link rel="stylesheet" href="{{ '/node_modules/flyonui/flyonui.css' | url }}">
  </head>

  <body>
    <template x-if="$store.landing.showInternal">
      {% include "header.njk" %}
    </template>

    <main id="main">
      {% if hero_picture %}
        <div class="hero-image mb-8">
          {% image "src/assets/images/" + hero_picture + ".png", title, "100vw" %}
        </div>
      {% endif %}
      
      {{ content | safe }}

    </main>

    <template x-if="$store.landing.showInternal">
      {% include "footer.njk" %}
    </template>

    <!-- Theme Controller -->
    <div class="fixed bottom-4 left-4 z-50" x-show="$store.landing.isDev">
      <div class="flex gap-2">
        <!-- Theme Switcher -->
        <div class="dropdown relative inline-flex">
          <button type="button" class="dropdown-toggle bg-base-200/50 backdrop-blur-sm rounded-lg py-2 px-4 border border-primary/20 shadow-lg flex items-center gap-2" aria-haspopup="menu" aria-expanded="false">
            <span class="text-xs text-base-content font-medium">Theme</span>
            <span class="icon-[tabler--chevron-down] dropdown-open:rotate-180 size-4"></span>
          </button>
          <ul class="dropdown-menu dropdown-open:opacity-100 hidden min-w-48 bg-base-200/95 backdrop-blur-sm rounded-lg border border-primary/20 shadow-lg p-2" role="menu">
            <li>
              <button class="dropdown-item w-full text-left px-4 py-2 rounded-lg hover:bg-base-300/50 transition-colors" 
                      :class="{ 'bg-base-300/50': selectedTheme === 'cyberpunk' }"
                      @click="setTheme('cyberpunk')">
                Cyberpunk
              </button>
            </li>
            <li>
              <button class="dropdown-item w-full text-left px-4 py-2 rounded-lg hover:bg-base-300/50 transition-colors"
                      :class="{ 'bg-base-300/50': selectedTheme === 'acid' }"
                      @click="setTheme('acid')">
                Acid
              </button>
            </li>
            <li>
              <button class="dropdown-item w-full text-left px-4 py-2 rounded-lg hover:bg-base-300/50 transition-colors"
                      :class="{ 'bg-base-300/50': selectedTheme === 'ghibli' }"
                      @click="setTheme('ghibli')">
                Ghibli
              </button>
            </li>
            <li>
              <button class="dropdown-item w-full text-left px-4 py-2 rounded-lg hover:bg-base-300/50 transition-colors"
                      :class="{ 'bg-base-300/50': selectedTheme === 'valorant' }"
                      @click="setTheme('valorant')">
                Valorant
              </button>
            </li>
          </ul>
        </div>

        <!-- Coming Soon Toggle (Only on landing page) -->
        <div x-show="window.location.pathname === '/' || window.location.pathname === '/index.html'" class="bg-base-200/50 backdrop-blur-sm rounded-lg py-2 px-4 border border-primary/20 shadow-lg">
          <div class="flex items-center gap-2">
            <span class="text-xs text-base-content font-medium">Coming Soon</span>
            <label class="cursor-pointer">
              <input type="checkbox" class="switch switch-primary" :checked="$store.landing.showInternal" @change="$store.landing.toggleView()" />
            </label>
            <span class="text-xs text-base-content font-medium">Full Site</span>
          </div>
        </div>
      </div>
    </div>

    <script type="module" src="{{ '/assets/js/index.js' | url }}"></script>
    <script type="module" src="{{ '/node_modules/flyonui/flyonui.js' | url }}"></script>
  </body>
</html>
